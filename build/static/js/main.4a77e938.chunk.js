(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports=n(146)},140:function(e,t){},146:function(e,t,n){"use strict";n.r(t);var a,c,o,i=n(98),r=n(99),s=n(106),l=n(100),u=n(107),m=n(11),d=n.n(m),f=n(101),h=n.n(f),b=(n(105),n(83)),p=n.n(b),w=n(102),g=n(103),N=n.n(g)()("http://localhost:6767"),E=n(35),v=n(104),C=function(e,t,n,a){return new(n||(n=Promise))(function(c,o){function i(e){try{s(a.next(e))}catch(t){o(t)}}function r(e){try{s(a.throw(e))}catch(t){o(t)}}function s(e){e.done?c(e.value):new n(function(t){t(e.value)}).then(i,r)}s((a=a.apply(e,t||[])).next())})},k=function(e,t){var n,a,c,o,i={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(c=2&o[0]?a.return:o[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,o[1])).done)return c;switch(a=0,c&&(o=[2&o[0],c.value]),o[0]){case 0:case 1:c=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(c=(c=i.trys).length>0&&c[c.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!c||o[1]>c[0]&&o[1]<c[3])){i.label=o[1];break}if(6===o[0]&&i.label<c[1]){i.label=c[1],c=o;break}if(c&&i.label<c[2]){i.label=c[2],i.ops.push(o);break}c[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(r){o=[6,r],a=0}finally{n=c=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}};!function(e){e[e.NONE=0]="NONE",e[e.MUSE=1]="MUSE",e[e.GANGLION=2]="GANGLION"}(a||(a={})),function(e){e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED"}(c||(c={})),function(e){e[e.FP1=0]="FP1",e[e.FP2=1]="FP2",e[e.AF7=2]="AF7",e[e.AF8=3]="AF8",e[e.F7=4]="F7",e[e.F3=5]="F3",e[e.FZ=6]="FZ",e[e.F4=7]="F4",e[e.F8=8]="F8",e[e.A1=9]="A1",e[e.T3=10]="T3",e[e.C3=11]="C3",e[e.CZ=12]="CZ",e[e.C4=13]="C4",e[e.T4=14]="T4",e[e.A2=15]="A2",e[e.TP9=16]="TP9",e[e.TP10=17]="TP10",e[e.T5=18]="T5",e[e.P3=19]="P3",e[e.PZ=20]="PZ",e[e.P4=21]="P4",e[e.T6=22]="T6",e[e.O1=23]="O1",e[e.O2=24]="O2"}(o||(o={}));var y=function(){function e(e){this.device=null,this.type=a.NONE,this.state=c.DISCONNECTED,this.callbacks=e}return e.prototype.connect=function(){return C(this,void 0,void 0,function(){var e,t,n,i;return k(this,function(r){switch(r.label){case 0:return null!==this.device&&this.state===c.CONNECTED&&this.disconnect(),[4,navigator.bluetooth.requestDevice({filters:[{namePrefix:"Ganglion-"},{namePrefix:"Muse-"}],optionalServices:[E.MUSE_SERVICE,65156]})];case 1:if(!(e=r.sent())||!e.gatt||!e.name)throw new Error("Required fields are empty!");return[4,e.gatt.connect()];case 2:switch(t=r.sent(),this.state=c.CONNECTED,n=[],i=this,function(e){if(e.name.match(/^Muse-/))return a.MUSE;if(e.name.match(/^Ganglion-/))return a.GANGLION;throw new Error("Unknown device type with name: "+e.name)}(e)){case a.MUSE:this.type=a.MUSE,this.device=new E.MuseClient,n[E.channelNames.indexOf("TP9")]=o.TP9,n[E.channelNames.indexOf("TP10")]=o.TP10,n[E.channelNames.indexOf("AF7")]=o.AF7,n[E.channelNames.indexOf("AF8")]=o.AF8,this.sync=new Array(4).fill(0),this.subscription=function(){var e=i.device;e.eegReadings.subscribe(function(e){var t=n[e.electrode],a=e.timestamp-i.sync[t];i.callbacks.dataHandler&&i.callbacks.dataHandler({data:e.samples,electrode:t,sampleRate:1e3/a*e.samples.length}),i.sync[t]=e.timestamp}),e.telemetryData.subscribe(function(e){i.callbacks.statusHandler&&i.callbacks.statusHandler(e)}),e.connectionStatus.subscribe(function(e){i.callbacks.connectionHandler&&i.callbacks.connectionHandler(e)})};break;case a.GANGLION:this.type=a.GANGLION,this.device=new v.Ganglion,n[0]=o.FP1,n[1]=o.FP2,n[2]=o.O1,n[3]=o.O2,this.sync=new Array(4).fill(0),this.subscription=function(){i.device.stream.subscribe(function(e){e.data.forEach(function(t,a){var c=n[a],o=e.timestamp.getUTCMilliseconds()-i.sync[c];i.callbacks.dataHandler&&i.callbacks.dataHandler({data:[t],electrode:c,sampleRate:1e3/o}),i.sync[c]=e.timestamp.getUTCMilliseconds()})}),console.warn("BCIDevice: Ganglion does not offer status information."),console.warn("BCIDevice: Ganglion does not offer connection information."),i.callbacks.connectionHandler&&i.callbacks.connectionHandler(!0)}}return[4,this.device.connect(t)];case 3:return r.sent(),[4,this.device.start()];case 4:return r.sent(),this.subscription(),[2]}})})},e.prototype.disconnect=function(){this.state!==c.DISCONNECTED&&(this.device.disconnect(),this.state=c.DISCONNECTED)},e.prototype.subscribe=function(e){this.callbacks.dataHandler=e},e.electrodeIndex=function(e){return o[e]},e}(),T=new Array,O={alpha:-1,beta:-1,theta:-1,gamma:-1,engagement:-1},P=new y({dataHandler:function(e){if(e.data.forEach(function(e){T.length>64&&T.shift(),T.push(e)}),!(T.length<64)){var t=window.bci.signal.getPSD(64,T),n=window.bci.signal.getBandPower(64,t,256,"alpha"),a=window.bci.signal.getBandPower(64,t,256,"beta"),c=window.bci.signal.getBandPower(64,t,256,"theta"),o=window.bci.signal.getBandPower(64,t,256,"gamma"),i=a/(n+c),r=n+a+c+o,s=n/r,l=a/r,u=c/r,m=o/r;O.alpha<0?(O.alpha=s||0,O.beta=l||0,O.theta=u||0,O.gamma=m||0,O.engagement=i||0):(O.alpha=.95*O.alpha+(s||0)*(1-.95),O.beta=.95*O.beta+(l||0)*(1-.95),O.theta=.95*O.theta+(u||0)*(1-.95),O.gamma=.95*O.gamma+(m||0)*(1-.95),O.engagement=.95*O.engagement+(i||0)*(1-.95)),N.emit("data",O.engagement)}}}),F=function(e){return function(){console.log("The command pressed was: ",e),N.emit("command",e)}},A=function(){var e=Object(w.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("here"),e.prev=1,e.next=4,P.connect();case 4:console.log("here"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}();var D=function(){return d.a.createElement("div",null,d.a.createElement("div",{className:"ui two top attached buttons"},d.a.createElement("button",{className:"ui button",onClick:F("takeoff")},"Takeoff"),d.a.createElement("button",{className:"ui button",onClick:F("land")},"Land")),d.a.createElement("div",{className:"ui center vertical basic buttons"},d.a.createElement("button",{className:"ui button",onClick:F("up 50")},"Up 50cm"),d.a.createElement("button",{className:"ui button",onClick:F("down 50")},"Down 50cm"),d.a.createElement("button",{className:"ui button",onClick:F("right 50")},"Right 50cm"),d.a.createElement("button",{className:"ui button",onClick:F("left 50")},"Left 50cm"),d.a.createElement("button",{className:"ui button",onClick:F("forward 50")},"Forward 50cm"),d.a.createElement("button",{className:"ui button",onClick:F("back 50")},"Backwards 50cm")),d.a.createElement("div",{className:"ui two bottom attached buttons"},d.a.createElement("button",{className:"negative ui button",onClick:F("emergency")},"Emergency"),d.a.createElement("button",{className:"ui button",onClick:A},"Connect!")))};d.a.Component;h.a.render(d.a.createElement(D,null),document.querySelector("#root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.4a77e938.chunk.js.map